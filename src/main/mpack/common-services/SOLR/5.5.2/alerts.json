{
  "SOLR": {
    "SOLR_SERVER": [
      {
        "name": "solr",
        "label": "Solr Web UI",
        "description": "This host-level alert is triggered if the Solr Cloud Instance is unreachable.",
        "interval": 1,
        "scope": "ANY",
        "source": {
          "type": "WEB",
          "uri": {
            "http": "{{solr-config-env/solr_config_port}}",
            "https": "{{solr-config-env/solr_config_port}}",
            "connection_timeout": 5.0,
            "default_port": 8983
          },
          "reporting": {
            "ok": {
              "text": "HTTP {0} response in {2:.3f}s"
            },
            "warning": {
              "text": "HTTP {0} response from {1} in {2:.3f}s ({3})"
            },
            "critical": {
              "text": "Connection failed to {1} ({3})"
            }
          }
        }
      },
      {
        "name": "solr_cpu_usage",
        "label": "Solr CPU Utilization",
        "description": "This host-level alert is triggered if CPU utilization of the Solr exceeds certain warning and critical thresholds. It checks the Solr JMX Servlet for the SystemCPULoad property. The threshold values are in percent.",
        "interval": 5,
        "scope": "ANY",
        "source": {
          "type": "AMS",
          "uri": {
            "http": "{{ams-site/timeline.metrics.service.webapp.address}}",
            "https": "{{ams-site/timeline.metrics.service.webapp.address}}",
            "https_property": "{{ams-site/timeline.metrics.service.http.policy}}",
            "https_property_value": "HTTPS_ONLY",
            "connection_timeout": 15.0
          },
          "reporting": {
            "ok": {
              "text": "CPU load {0:.1%}"
            },
            "warning": {
              "text": "CPU load {0:.1%}",
              "value": 400
            },
            "critical": {
              "text": "CPU load {0:.1%}",
              "value": 450
            },
            "units" : "%"
          },
          "ams": {
            "app_id": "solr-timeline-app",
            "interval": 1,
            "metric_list": [
              "olr.admin.info.system.processCpuLoad"
            ],
            "value": "{0}",
            "compute": "mean"
          }
        }
      },
      {
        "name": "solr_memory",
        "label": "Solr Memory Utilization",
        "description": "This host-level alert is triggered if CPU utilization of the Solr exceeds certain warning and critical thresholds. It checks the Solr JMX Servlet for the SystemCPULoad property. The threshold values are in percent.",
        "interval": 5,
        "scope": "ANY",
        "source": {
          "type": "AMS",
          "uri": {
            "http": "{{ams-site/timeline.metrics.service.webapp.address}}",
            "https": "{{ams-site/timeline.metrics.service.webapp.address}}",
            "https_property": "{{ams-site/timeline.metrics.service.http.policy}}",
            "https_property_value": "HTTPS_ONLY",
            "connection_timeout": 15.0
          },
          "reporting": {
            "ok": {
              "text": "Memory usage is {0:.1%}"
            },
            "warning": {
              "text": "Memory usage is {0:.1%}",
              "value": 400
            },
            "critical": {
              "text": "Memory usage is {0:.1%}",
              "value": 450
            },
            "units" : "%"
          },
          "ams": {
            "app_id": "solr-timeline-app",
            "interval": 1,
            "metric_list": [
              "solr.admin.info.jvm.memory.used",
              "solr.admin.info.jvm.memory.max"
            ],
            "value": "{0} / {1}",
            "compute": "mean"
          }
        }
      }
    ]
  }
}
